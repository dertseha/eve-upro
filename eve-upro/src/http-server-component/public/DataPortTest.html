<html>
<head>
   <meta "http-equiv='X-UA-Compatible' content='IE=9'" />
   <title>DataPort Test</title>
   <script type="text/javascript" charset="utf-8" src="/javascripts/EventSource.js"></script>
   <script type="text/javascript" charset="utf-8" src="/javascripts/release/prototype.js"></script>
</head>
<body>
   Hello there!
   <div id='test'></div>


   <script language="JavaScript">
var evtSrc = new EventSource( "eventSource" );

if (evtSrc)
{
      var elem = document.getElementById("test");

   elem.innerHTML += "doing something? ";

   evtSrc.addEventListener("Timer", function( e ) {
//      addMessage( JSON.parse(e.data) );
   }, false);
   evtSrc.addEventListener("Session", function( e ) {
      addMessage( e.data );
   }, false);
   elem.innerHTML += "doing more!";

   function addMessage( data ) {
      console.log(data);

      var paragraph = document.createElement("p");
      paragraph.appendChild(document.createTextNode(data));
      document.body.appendChild(paragraph);
   }

   function sendStatus()
   {

   }

   setInterval(sendStatus, 5000);
}
else
{
   var elem = document.getElementById("test");

   elem.innerHTML += "No event source!";
}
   </script>

</body>
</html>